<launch>
<!-- Launch file for Livox AVIA LiDAR -->

	<arg name="rviz" default="true" />
	<node pkg="image_transport" type="republish" name="republish" 
      args="compressed in:=/camera/color/image_raw raw out:=/camera/color/image_raw" 
      output="screen" respawn="true"/>

	<rosparam command="load" file="$(find fast_livo)/config/realsense.yaml" />
	<rosparam command="load" file="$(find ImMesh)/config/realsense.yaml" />
	<param name="meshing/distance_scale" type="double" value="1.0" /> 
	<param name="gui_font_size" type="int" value="20" />
	
	<node pkg="fast_livo" type="mag_field_visualizer.py" name="mag_field_visualizer" output="screen"/>

	<node pkg="fast_livo" type="fastlivo_mapping" name="laserMapping" output="screen">
		<rosparam file="$(find fast_livo)/config/camera_realsense.yaml" />
	</node>
	<node pkg="ImMesh" type="ImMesh_mapping" name="ImMesh_mapping" output="screen"/> 
	<group if="$(arg rviz)">
		<node launch-prefix="nice" pkg="rviz" type="rviz" name="rviz" args="-d $(find fast_livo)/rviz_cfg/fast_livo2.rviz" />
	</group>
</launch> 	
